version: "3.9"

services:
  api:
    image: ghcr.io/raztreuzz/vault_go:prod
    container_name: ${INSTANCE_ID}-api
    restart: unless-stopped
    environment:
      APP_ENV: ${APP_ENV}
      PORT: ${API_PORT}
      DB_PATH: ${DB_PATH}
      CORS_ORIGINS: ${CORS_ORIGINS}
    volumes:
      - data:/data
    ports:
      - "0:${API_PORT}"
    networks:
      - ark_shared

  web:
    image: ghcr.io/raztreuzz/vault_frontend:mem-enhancements
    container_name: ${INSTANCE_ID}-web
    restart: unless-stopped
    ports:
      - "0:80"
    depends_on:
      - api
    networks:
      - ark_shared

volumes:
   data:

networks:
  ark_shared:
    external: true
    name: bridge
